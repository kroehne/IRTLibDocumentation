<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>data-collection-player-integration – Home | IRTlib</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Home | IRTlib</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Suchen"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Navigation umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./download.html"> 
<span class="menu-text">Download</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-vorbereitung" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Vorbereitung</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-vorbereitung">    
        <li>
    <a class="dropdown-item" href="./preparation-overview.html">
 <span class="dropdown-text">Übersicht</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./preparation-studies.html">
 <span class="dropdown-text">Studien</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./preparation-parts.html">
 <span class="dropdown-text">Erhebungsteile</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-datenerhebung" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Datenerhebung</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-datenerhebung">    
        <li>
    <a class="dropdown-item" href="./data-collection-overview.html">
 <span class="dropdown-text">Übersicht</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./data-collection-publish-and-export.html">
 <span class="dropdown-text">Veröffentlichen &amp; Export</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./data-collection-player-integration.html">
 <span class="dropdown-text">Integration &amp; Auslieferung</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./data-collection-post-processing.html">
 <span class="dropdown-text">Datenaufbereitung</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./settings.html"> 
<span class="menu-text">Einstellungen</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">Über</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-github" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-bi-github">    
        <li>
    <a class="dropdown-item" href="https://github.com/DIPFtba/IRTlibDeploymentSoftware">
 <span class="dropdown-text">IRTLib Releases</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/kroehne/IRTLibDocumentation">
 <span class="dropdown-text">IRTLib Dokumentation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./github.html">
 <span class="dropdown-text">(mehr)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./../en/index.html"> 
<span class="menu-text">(English Version)</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Lesemodus umschalten">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Auf dieser Seite</h2>
   
  <ul>
  <li><a href="#datenerhebung-in-irtlib-player-importieren-data-collection-import-into-irtlib-player" id="toc-datenerhebung-in-irtlib-player-importieren-data-collection-import-into-irtlib-player" class="nav-link active" data-scroll-target="#datenerhebung-in-irtlib-player-importieren-data-collection-import-into-irtlib-player">Datenerhebung: In <em>IRTlib Player</em> Importieren / Data Collection: Import into <em>IRTlib Player</em></a>
  <ul class="collapse">
  <li><a href="#konfiguration-importieren" id="toc-konfiguration-importieren" class="nav-link" data-scroll-target="#konfiguration-importieren">Konfiguration Importieren</a>
  <ul class="collapse">
  <li><a href="#automatischer-import" id="toc-automatischer-import" class="nav-link" data-scroll-target="#automatischer-import">Automatischer Import</a></li>
  <li><a href="#manuelles-importieren" id="toc-manuelles-importieren" class="nav-link" data-scroll-target="#manuelles-importieren">Manuelles Importieren</a></li>
  </ul></li>
  <li><a href="#auslieferungen-konfigurieren" id="toc-auslieferungen-konfigurieren" class="nav-link" data-scroll-target="#auslieferungen-konfigurieren">Auslieferungen Konfigurieren</a>
  <ul class="collapse">
  <li><a href="#desktop-version-windows" id="toc-desktop-version-windows" class="nav-link" data-scroll-target="#desktop-version-windows">Desktop-Version (Windows)</a></li>
  <li><a href="#lokaler-server-windows" id="toc-lokaler-server-windows" class="nav-link" data-scroll-target="#lokaler-server-windows">Lokaler Server (Windows)</a></li>
  <li><a href="#online-version-docker" id="toc-online-version-docker" class="nav-link" data-scroll-target="#online-version-docker">Online-Version (Docker)</a></li>
  </ul></li>
  <li><a href="#auslieferungen-testen-und-freigeben" id="toc-auslieferungen-testen-und-freigeben" class="nav-link" data-scroll-target="#auslieferungen-testen-und-freigeben">Auslieferungen Testen und Freigeben</a>
  <ul class="collapse">
  <li><a href="#vorgeschlagene-testpläne" id="toc-vorgeschlagene-testpläne" class="nav-link" data-scroll-target="#vorgeschlagene-testpläne">Vorgeschlagene Testpläne</a></li>
  <li><a href="#datenerhebung-durchführen" id="toc-datenerhebung-durchführen" class="nav-link" data-scroll-target="#datenerhebung-durchführen">Datenerhebung Durchführen</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">




<section id="datenerhebung-in-irtlib-player-importieren-data-collection-import-into-irtlib-player" class="level1">
<h1>Datenerhebung: In <em>IRTlib Player</em> Importieren / Data Collection: Import into <em>IRTlib Player</em></h1>
<section id="konfiguration-importieren" class="level2">
<h2 class="anchored" data-anchor-id="konfiguration-importieren">Konfiguration Importieren</h2>
<p>Im Folgenden ist beschrieben, wie eine mit einem <em>IRTlib Editor</em> erstellte Studienkonfiguration, die als ZIP-Archiv vorliegt, verwendet werden kann.</p>
<div class="callout callout-style-default callout-warning callout-titled" title="Veröffentlichte Version erforderlich">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Veröffentlichte Version erforderlich
</div>
</div>
<div class="callout-body-container callout-body">
<p>Für die Datenerhebung mit einem <em>IRTlib Player</em> ist eine veröffentlichte Version einer <em>Studie</em> notwendig.</p>
</div>
</div>
<p>Wenn eine <em>versiegelte</em> Studienkonfiguration aus dem <em>IRTlib Editor</em> exportiert wurde, kann diese in einen <em>IRTlib Player</em> integriert werden.</p>
<p>Zurzeit werden zwei Optionen unterstützt:</p>
<ul>
<li>Automatischer Import aus ZIP-Archiv</li>
<li>Manueller Import aus ZIP-Archiv</li>
</ul>
<p>Der <em>Automatische Import</em> ist nur für die erste <em>Studie</em> in einem <em>IRTlib Player</em> möglich. Sollen mehrere <em>Studien</em> in einem <em>IRTlib Player</em> parallel verwendet werden, muss ein <em>Manueller Import</em> durchgeführt werden.</p>
<section id="automatischer-import" class="level3">
<h3 class="anchored" data-anchor-id="automatischer-import">Automatischer Import</h3>
<p>Für einen <em>automatischen Import</em> einer als ZIP-Archiv vorliegenden <em>Studie</em> in einem Offline <em>IRTlib Player</em>, kann der Player zunächst über die ausführbare Datei <code>TestApp.Player.Desktop.exe</code> gestartet werden.</p>
<p>Wurde dieser <em>IRTlib Player</em> noch nicht mit einer <em>Studie</em> konfiguriert (d.h. wurde der Player bspw. wie unter <a href="./download.html">Download</a> beschrieben direkt von dem <a href="https://github.com/DIPFtba/IRTlibDeploymentSoftware/releases">Github</a>-Repositoy heruntergeladen), dann erscheint folgender Dialog:</p>
<p><img src="img/screenshot-irtlib-player-message-no-study01-de-DEU.png" class="img-fluid" width="450"></p>
<p>Durch Klicken der Schaltfläche <em>Studie Bereitstellen</em> kann das ZIP-Archiv direkt geöffnet werden. Es wird dann automatisch in den <em>IRTlib Player</em> eingefügt und kann über die im Abschnitt <em>Login</em> der <a href="./preparation-studies.html">Studie</a> konfigurierte Weise verwendet werden.</p>
</section>
<section id="manuelles-importieren" class="level3">
<h3 class="anchored" data-anchor-id="manuelles-importieren">Manuelles Importieren</h3>
<p>Wenn kein automatischer Import möglich oder gewollt ist, kann der Inhalt des ZIP-Archivs einer <em>Studie</em> auch manuell in das dafür vorgesehene Verzeichnis des <em>IRTlib Players</em> integriert werden.</p>
<p>Jedes ZIP-Archiv mit einer <em>Studienkonfiguration</em>, welches aus dem <em>IRTlib Editor</em> exportiert wurde, enthält drei Verzeichnisse. Die ZIP-Archive lassen <code>{StudyName.zip}</code> sich z.B. mit dem <em>Windows Explorer</em> öffnen:</p>
<p><img src="img/screenshot-example-study-zip-in-windows-explorer-01-DEU.png" class="img-fluid" width="450"></p>
<p>Um die <em>Studie</em> in einen <em>IRTlib Player</em> zu integrieren, kann der Inhalt dieser drei Verzeichnisse nun z.B. in das Programmverzeichnis eines Offline <em>IRTlib Players</em> integriert werden.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 93%">
</colgroup>
<thead>
<tr class="header">
<th>Schritt</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1.</td>
<td>Player (<code>TestApp.Player.zip</code>) entpacken. Das kann bspw. über den <em>Windows Explorer</em> erfolgen:</td>
</tr>
<tr class="even">
<td></td>
<td><img src="img/screenshot-unzip-player-zip-in-windows-explorer-01-DEU.png" class="img-fluid" width="200"></td>
</tr>
<tr class="odd">
<td>2.</td>
<td>In das entpackte Verzeichnis navigieren:</td>
</tr>
<tr class="even">
<td></td>
<td><img src="img/screenshot-player-raw-windows-explorer-01-DEU.png" class="img-fluid" width="350"></td>
</tr>
<tr class="odd">
<td>3.</td>
<td>Erstellen Sie einen neuen Ordner <code>Content</code> innerhalb des Player-Ordners (d.h. <code>TestApp.Player/Content/</code>). Wenn bereits eine Studie konfiguriert ist, dann existiert der Ordner <code>Content</code> bereits.</td>
</tr>
<tr class="even">
<td></td>
<td><img src="img/screenshot-player-create-new-folder-windows-explorer-01-DEU.png" class="img-fluid" width="350"></td>
</tr>
<tr class="odd">
<td>4.</td>
<td>Kopieren Sie die drei Ordner <code>ItemPool</code>, <code>Runtime</code> und <code>Studies</code> aus der heruntergeladenen Studie <code>{StudyName.zip}</code> in den <code>Content</code>-Ordner des Players.</td>
</tr>
<tr class="even">
<td></td>
<td><img src="img/screenshot-player-copy-files-in-windows-explorer-01-DEU.png" class="img-fluid" width="450"></td>
</tr>
<tr class="odd">
<td>5.</td>
<td>Starten der Datei <code>TestApp.Player.Desktop.exe</code></td>
</tr>
<tr class="even">
<td>6.</td>
<td>Wenn nötig akzeptieren Sie die folgende Warnung:</td>
</tr>
<tr class="odd">
<td></td>
<td><img src="img/screenshot-player-warning-appstart-01-DEU.png" class="img-fluid" width="250"></td>
</tr>
</tbody>
</table>
<p>Analog zu dem hier beschriebenen Vorgehen erfolgt auch der Import von <em>Studien</em> in einen Online <em>IRTlib Player</em>. Hierfür ist für die Vorbereitung Zugriff auf das im <a href="https://github.com/DIPFtba/IRTlibDeploymentSoftware/blob/main/docker/docker-compose.yml"><code>docker-compse.yml</code>-File</a> definierte <em>Volume</em> <code>/app/Content</code> notwendig.</p>
</section>
</section>
<section id="auslieferungen-konfigurieren" class="level2">
<h2 class="anchored" data-anchor-id="auslieferungen-konfigurieren">Auslieferungen Konfigurieren</h2>
<p>Die mit einem <em>IRTlib Editor</em> erstellten Studienkonfigurationen sind mit unterschiedlichen Varianten des <em>IRTlib Players</em> verwendbar.</p>
<p>Im Moment werden drei Varianten bereitgestellt:</p>
<ul>
<li>Desktop-Version (Windows)</li>
<li>Lokale Server-Version (Windows)</li>
<li>Online Version (Docker)</li>
</ul>
<section id="desktop-version-windows" class="level3">
<h3 class="anchored" data-anchor-id="desktop-version-windows">Desktop-Version (Windows)</h3>
<p>Basale Konfigurationen des <em>IRTlib Player</em> (Darstellung in einem Fenstermodus vs.&nbsp;Vollbildmodus) sind Teil der Studienkonfiguration. Nur Studien mit gleichen Einstellungen bzgl. der Darstellung können in einem Offline <em>IRTlib Player</em> gleichzeitig verwendet werden. Mehrere Kopien eines Offline <em>IRTlib Players</em> auf einem Computer sind möglich.</p>
<p>Um den (Offline) <em>IRTlib Player</em> auf einem Computer zu starten, muss die ausführbare Datei <code>TestApp.Player.Desktop.exe</code> gestartet werden.</p>
<p><strong>Datenspeicherung</strong>: Die während einer Datenerhebung mit dem Offline <em>IRTlib Player</em> erhobenen Daten werden in einem Verzeichnis lokal gespeichert. Das Verzeichnis und der Dateiname für die Rohdatenspeicherung sind in der <em>Studie</em> konfiguriert und können mithilfe von Startup-Parametern angepasst werden. Als Dateiname der <em>Rohdatenarchive</em> wird der Benutzername bzw. die erstellte UUID verwendet. Sollte in einem (Offline) <em>IRTlib Player</em> der Benutzername mehrfach verwendet werden, d.h. wenn beim Beenden des <em>IRTlib Players</em> bereits ein <em>Rohdatenarchiv</em> mit diesem Dateinamen existiert, wird dieses nicht überschrieben, sondern es wird ein Suffix angehängt (z.B. <code>PersonIdentifier_1.zip</code>).</p>
<p><strong>Startup-Parameter</strong>: Für die Integration des Offline <em>IRTlib Players</em> in programmierte Abläufe sind möglich. Anmeldedaten (Benutzername, Benutzername + Passwort, Token), die in einer <em>Studie</em> konfiguriert sind, können als so-genannte <em>Startup-Parameter</em> übergeben werden. Diese Parameter werden dann an den Aufruf von <code>TestApp.Player.Desktop.exe</code> angehängt.</p>
<p>Beispiel:</p>
<blockquote class="blockquote">
<p><code>TestApp.Player.Desktop.exe /RawDataFolder="..\\myDataFolder"</code></p>
</blockquote>
<p>Gültige Startup-Parameter sind:</p>
<ul>
<li><code>/AutoLoginCreateWithTest="{StudienName}"</code>: Fordert die Administration der Studie mit der Bezeichnung <code>{StudienName}</code> an.</li>
<li><code>/AutoLoginUserName="{PersonIdentifier}"</code>: Übergibt die Anmeldeinformation <code>{PersonIdentifier}</code> als Benutzername.</li>
<li><code>/MyBlocklyVariable="123"</code>: Übergibt den Wert <code>123</code> für die <em>Blockly</em>-Variable <code>MyBlocklyVariable</code>.</li>
<li><code>/MonitoringFile="..\\last-run.json"</code>: Pfad und Dateiname der so-genannten Monitoring-Datei.</li>
<li><code>/RawDataFolder="..\\myDataFolder"</code>: Pfad zu dem Verzeichnis, in welchem die <em>Rohdatenarchive</em> gespeichert werden.</li>
<li><code>/volume="0.5"</code>: Wert der verwendet werden soll, um die Systemlautstärke zu setzen (zwischen 0 und 1).</li>
<li><code>/minvolume="0.2"</code>: Wert der als untere Schwelle der Lautstärke verwendet werden soll (zwischen 0 und 1).</li>
<li><code>/maxvolume="0.8"</code>: Wert der als obere Schwelle der Lautstärke verwendet werden soll (zwischen 0 und 1).</li>
</ul>
<p>Mehrere Startup-Parameter nacheinander sind möglich (getrennt durch Leerzeichen).</p>
<p>Technische Konfigurationen, die nicht per Startup-Parameter übergeben werden sollen, können auch über die Datei <a href="https://github.com/DIPFtba/IRTlibDeploymentSoftware/blob/main/docker/TestApp.Player/appsettings.json"><code>appsettings.json</code></a>, welche im Verzeichnis <code>TestApp.Player</code> enthalten ist, festgelegt werden.</p>
<p>Im Abschnitt <em>Chromely</em> kann bspw. die Lautstärkekonfigurationen vorgenommen werden:</p>
<pre><code>{
  ...
  "Chromely": {
    ...
    "Audio": {
      "MinVolume": 0,
      "MaxVolume": 1,
      "StartVolume": 0.5
    }
  }
}</code></pre>
<p><strong>Prüfung von Voraussetzungen</strong>: Der <em>IRTlib Player</em> sollte auf Windows-Computern (aktuell unterstützt ab <em>Windows 10</em>) ohne weitere Installation oder Laufzeitvoraussetzungen ausgeführt werden können. Spezielle Konfigurationen, Virenscanner usw. können die Ausführung aber unterbinden. Ein Tool zum Prüfen von Voraussetzungen kann bspw. aufbauend auf diesem Beispiel (<a href="https://github.com/kroehne/IRTlibReadiness">IRTlibReadiness</a>) erstellt werden.</p>
<div class="callout callout-style-default callout-important callout-titled" title="Wichtiger Hinweis">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Wichtiger Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Die bereitgestellte Windows-Version des <em>IRTlib Player</em> ermöglicht einen einfachen <em>Kiosk</em>-Modus, der nur für Computer mit nur einem Bildschirm (z.B. Notebooks) vorgesehen ist. Für eine Prüfungssichere Kiosk-Lösung kann die Offline-Version des <em>IRTlib Players</em> als <em>lokaler Server</em> mit weiterer Software (wie bspw. dem <a href="https://safeexambrowser.org/">Safe Exam Browser</a>) kombiniert werden.</p>
</div>
</div>
</section>
<section id="lokaler-server-windows" class="level3">
<h3 class="anchored" data-anchor-id="lokaler-server-windows">Lokaler Server (Windows)</h3>
<p>Die über das <a href="https://github.com/DIPFtba/IRTlibDeploymentSoftware/releases">Github</a>-Repository im Abschnitt <em>Releases</em> verfügbaren ZIP-Archive des Offline <em>IRTlib Players</em> enthalten parallel zu der Anwendung mit integriertem Browser (<code>TestApp.Player.Desktop.exe</code>) auch eine <em>lokale Server-Version</em>, welche über die ausführbare Datei <code>TestApp.Player.Server.exe</code> gestartet werden kann.</p>
<!-- (TO-DO: Zugriff über Routen beschreiben) -->
<div class="callout callout-style-default callout-important callout-titled" title="Wichtiger Hinweis">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Wichtiger Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Die Version <code>TestApp.Player.Server.exe</code> ist gedacht für einen Offline-Betrieb in Bring-in Netzwerken, z.B. wenn WLAN-Router und Server-Notebook in Schulen gebracht werden. Diese Version ist nicht für Online-Ehrebungen gedacht (wofür die Docker-Version bereitgestellt wird).</p>
</div>
</div>
</section>
<section id="online-version-docker" class="level3">
<h3 class="anchored" data-anchor-id="online-version-docker">Online-Version (Docker)</h3>
<!-- 

::: {.callout-important title="Wichtiger Hinweis" collapse="true"}
Die bereitgestellten *Docker*-Container für *IRTlib Player* und *IRTlib Editor* müssen von einem Administrator in eine sichere Umgebung integriert werden, bevor sie für Datenerhebungen verwendet werden können. 


Das folgende Beispiel dient nur der Illustration. [Docker]() und [Git]() müssen für dieses Beispiel installiert sein.


|Schritt|Beschreibung|
|---|-------------| 
|1  | Konsole starten: |
|   | * Windows:  |
|   | * Mac:  |
|2  | Prüfen, ob *Docker* installiert ist und läuft: |
|   | `docker info` |
|3  | Prüfen, ob *Git* installiert ist: |
|   | `git version` |
|4  | Konfiguration von [Github](https://github.com/DIPFtba/IRTlibDeploymentSoftware/) beziehen: |
|   | * Download (wenn kein *Git* installiert ist):  |
|   | * Git:  |
|   | `git clone --branch develop https://github.com/DIPFtba/IRTlibDeploymentSoftware.git`  |
|5  | Datei `appsettings.json` im Verzeichnis `IRTlibDeploymentSoftware/` `docker/` `TestApp.Player/` bearbeiten und `ExternalExportKey` eintragen: |
|   | `"ExternalExportKey": "mykey123",`|
|6  | Datei `docker-compose.yml` im Verzeichnis `IRTlibDeploymentSoftware/` `docker/` bearbeiten und Ports eintragen: |
|   | |
|7  | Im Verzeichnis `IRTlibDeploymentSoftware/` `docker/` das Skript `start.sh` ausführen: |
|   | `./start.sh`|




:::

-->
<p><strong>Integration</strong>: Für die Durchführung einer Datenerhebung sollte das <em>Docker</em>-Image des <em>IRTlib Players</em> nur über https-gesicherte Verbindungen erreichbar sein. Das kann bspw. mithilfe eines als <em>Reverse Proxy</em> konfigurierten zusätzlichen <em>nginx</em> realisiert werden.</p>
<p><strong>Zugriff auf Editor</strong>: Für unbefugte Personen, die nicht mit der Studienvorbereitung betraut sind, darf kein Zugriff auf den <em>IRTlib Editor</em> möglich sein. Über das <a href="https://github.com/DIPFtba/IRTlibDeploymentSoftware/">Github</a>-Repository werden <em>IRTlib Editor</em> und <em>IRTlib Player</em> bereitgestellt. Für eine operative Datenerhebung ist es nicht notwendig, den <em>IRTlib Editor</em> online zu betreiben, da die Studienvorbereitung auch mit der Offline-Version des <em>IRTlib Editors</em> erstellt werden kann. Wird der <em>IRTlib Editor</em> online gehostet, muss er vor dem Zugriff Unbefugter geschützt werden.</p>
<p><strong>Zugriff auf Verzeichnisse</strong>: In den im <a href="https://github.com/DIPFtba/IRTlibDeploymentSoftware/blob/main/docker/docker-compose.yml"><code>docker-compse.yml</code>-File</a> definierten <em>Volumes</em> <code>/app/Content</code> (<em>IRTlib Player</em>) und <code>/app/data</code> (<em>IRTlib Editor</em>) sind die Iteminhalte hinterlegt, die für ein Assessment konfiguriert werden. Um den Schutz von Instrumenten sicherzustellen, darf kein Zugriff für Unbefugte auf diese <em>Volumes</em> möglich sein.</p>
<p><strong>Datenspeicherung</strong>: Die während einer Datenerhebung mit dem Online <em>IRTlib Player</em> erhobenen Daten werden in dem <em>Volume</em> <code>app/result</code> gespeichert. Sie können von dort als Verzeichnisse (ein Verzeichnis je <em>Session</em>) oder als <em>Rohdatenarchive</em> über eine <em>API</em> abgerufen werden (wenn ein <em>API</em>-key definiert ist).</p>
<div class="callout callout-style-default callout-warning callout-titled" title="Hinweis">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Bei Verwendung der <em>Docker</em>-Container können Assessmentinhalte und Daten online zugreifbar sein. Assessmentinhalte sind nur über den in der Studienkonfiguration definierten <em>Loginmodus</em> geschützt. Personendaten und Assessmentinhalte könne zusätzlich zugreifbar sein, wenn ein <em>API</em>-key definiert ist.</p>
</div>
</div>
<p><strong>Konfiguration des Players</strong>: Zentral für die technische Konfiguration des Players ist die Datei <a href="https://github.com/DIPFtba/IRTlibDeploymentSoftware/blob/main/docker/TestApp.Player/appsettings.json"><code>appsettings.json</code></a>, welche im Verzeichnis <code>TestApp.Player</code> enthalten ist. In dieser Datei können u.a. drei verschiedene <em>API-Keys</em> (also Zugriffsschlüssel) hinterlegt werden, in dem sie in folgender <code>JSON</code>-Struktur hinterlegt werden, bevor der <em>Docker</em>-Container gestartet wird:</p>
<pre><code>"API": {
   "ExternalExportKey": "",
   "DevelopmentKey": "",
   "LoginManagementKeys": []
 }</code></pre>
<p>Die <em>API-Keys</em> haben die folgenden Funktionen:</p>
<ul>
<li><code>ExternalExportKey</code>: Über diesen <em>Schlüssel</em> erhält man Zugang zu den mit dem <em>IRTlib Player</em> erhobenen Daten. Der Zugriff auf die Daten kann bspw. über das R-Paket <a href="http://www.logfsm.com">LogFSM</a> erfolgen, wie im Abschnitt <a href="ata-collection-post-processing.qmd#datenabruf-mit-logfsm"><em>Datenabruf</em></a> beschrieben.</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Routen zum Direkten Zugriff">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Routen zum Direkten Zugriff
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Die Liste der bearbeiteten Session, d.h. die <em>Session-Identifier</em> lassen sich mit einem <em>API-Key</em> für <code>ExternalExportKey</code> über folgenden Aufruf als <code>JSON</code> abrufen:</p>
<p><code>https://{U}/{S}/api/session/?apiKey={K}</code></p>
<ul>
<li><code>{U}</code> ist die URL des <em>IRTlib Players</em></li>
<li><code>{S}</code> ist der Bezeichner der <em>Studie</em></li>
<li><code>{K}</code> ist die <code>ExternalExportKey</code> wie in der <code>appsettings.json</code> definiert</li>
</ul>
<p>Mit einer bekanntem <em>Session-Identifier</em> lassen sich dann die Rohdaten über folgende Abruf mit einem <em>API-Key</em> für <code>ExternalExportKey</code> beziehen:</p>
<p><code>https://{U}/{S}/api/session/{ID}/result?apiKey={K}</code></p>
<ul>
<li><code>{ID}</code> ist der <em>Session-Identifier</em> (z.B. der Benutzername, je nach Konfiguration des Logins)</li>
</ul>
</div>
</div>
</div>
<ul>
<li><code>DevelopmentKey</code>: Dieser <em>API-Key</em> ist für das Anpassen von Studienkonfigurationen in einem laufenden Player vorgesehen.</li>
</ul>
<div class="callout callout-style-default callout-important callout-titled" title="Under Development">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Under Development
</div>
</div>
<div class="callout-body-container callout-body">
<p>Diese Funktion ist gerade in Entwicklung.</p>
</div>
</div>
<ul>
<li><code>LoginManagementKeys</code>: Diese Liste von <em>API-Keys</em> ist für das Anpassen Zugangsdaten (Accounts) in einem laufenden Player vorgesehen.</li>
</ul>
<div class="callout callout-style-default callout-important callout-titled" title="Under Development">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Under Development
</div>
</div>
<div class="callout-body-container callout-body">
<p>Diese Funktion ist gerade in Entwicklung.</p>
</div>
</div>
<p><strong>Monitoring</strong>: (Eine Methode zur Überwachung von <em>Docker</em>-Containern ist in Entwicklung).</p>
</section>
</section>
<section id="auslieferungen-testen-und-freigeben" class="level2">
<h2 class="anchored" data-anchor-id="auslieferungen-testen-und-freigeben">Auslieferungen Testen und Freigeben</h2>
<p>Mit der Integration einer <em>Studienkonfiguration</em> in einen <em>IRTlib Player</em> ist die Vorbereitung noch nicht abgeschlossen. Bevor eine Datenerhebung mit der <em>IRTlib Software</em> begonnen werden kann, sollten folgende Tests durchlaufen werden:</p>
<p><strong>(Tests innerhalb der <em>CBA ItemBuilder</em>-<em>Preview</em>)</strong>: Bevor die Konfiguration einer <em>Studie</em> und eines <em>Erhebungsteils</em> mit <em>CBA ItemBuilder</em>-<em>Tasks</em> erfolgt, sollte diese im Hinblick auf Darstellung, Funktionalität und Scoring bereits in der <em>Preview</em> des <em>CBA ItemBuilder</em> getestet sein.</p>
<p><strong>Funktionale Tests</strong>: Insbesondere wenn <em>CBA ItemBuilder</em>-<em>Tasks</em> mit der Auslieferungsplattform interagieren (wie bspw. <em>Login</em>-Items), sollten funktionale Tests (d.h. Tests von konkreten Funktionen) in der Auslieferungssoftware erfolgen. Das betrifft auch die Navigation zwischen Items und natürlich die in der Auslieferungsumgebung konfigurierte Ablaufsteuerung.</p>
<p><strong>Cross-Browser-Testung</strong>: Werden Studien nicht mit dem Offline <em>IRTlib Player</em> durchgeführt (welcher seinen eigenen Browser mitbringt) und insbesondere wenn über sogenannte <em>ExternalPageFrames (d.h. <code>iframes</code>) neu oder spezifisch programmierte </em>JavaScript/HTML5<em>-Inhalte innerhalb der </em>CBA ItemBuilder<em>-</em>Tasks* verwendet werde, sollte eine Testung in verschiedenen Browsern erfolgen.</p>
<p><strong>Performanz-Tests</strong>: Wenn große Mediendateien (Videos, Audiodateien) in den <em>CBA ItemBuilder</em>-<em>Tasks</em> enthalten sind, kann es ratsam sein, die Durchführbarkeit des Assessments auch unter ungünstigen Netzwerkbedingungen (z.B. geringe Bandbreite, lange Latenzen, Verbindungsabbrüche usw.) zu testen.</p>
<p><strong>Last-Tests</strong>: Wenn sehr viele Testteilnehmer parallel (online) getestet werden sollen, kann es ratsam sein, das Lastverhalten der Auslieferung (und bspw. die für den <em>Docker</em>-Container verfügbaren Ressourcen) vorab abzustimmen.</p>
<p><strong>Datenablageprüfung</strong>: In jedem Fall sollte die Passung der Scoring-Definition innerhalb der <em>CBA ItemBuilder</em>-<em>Tasks</em> und der Konfiguration im <em>IRTlib Editor</em> geprüft und eine Datenablageprüfung gemacht werden. Damit ist gemeint, dass <em>vor</em> Erhebungsstart synthetische Klickmuster (also Antworten) eingegeben und mit den im Datensatz gespeicherten Antworten verglichen werden. Um bei der späteren Überprüfung Eingabefehler gut erkennen zu können, hat es sich bewährt, für die Datenablageprüfung Bildschirmvideos parallel aufzuzeichnen.</p>
<p><strong>Smoke-Test</strong>: Die abschließende Form des Testens ist ein Durchlauftest in dem fertig konfigurierten Setting aus <em>Studie</em> in einem <em>IRTlib Player</em>. Die Erhebung sollte richtig dargestellt werden und ein lesbare <em>Rohdatenarchiv</em> sollte entstehen.</p>
<section id="vorgeschlagene-testpläne" class="level3">
<h3 class="anchored" data-anchor-id="vorgeschlagene-testpläne">Vorgeschlagene Testpläne</h3>
<div class="callout callout-style-default callout-tip callout-titled" title="Hinweis">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Die Bereitstellung der freien Forschungssoftware <em>IRTlib Editor</em> und <em>IRTlib Player</em> erfolgt ohne Gewähr und es kann keine Haftung für fehlende Daten, Datenverlust oder kompromittierte Daten usw. übernommen werden.</p>
</div>
</div>
<p>Allgemeingültige Empfehlungen zu (unbedingt) notwendigen Tests sind schwer zu formulieren, die folgende Tabelle ist deshalb als unverbindliche Empfehlung zu verstehen, welche im konkrete Fall abzuwägen ist.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 21%">
<col style="width: 14%">
<col style="width: 64%">
</colgroup>
<thead>
<tr class="header">
<th>Test</th>
<th>Empfehlung</th>
<th>Bedingung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><em>CBA ItemBuilder</em>-<em>Preview</em></td>
<td>Immer</td>
<td>(Fehler in Darstellung, Verhalten und Scoring, die sich bereits bei der Itemerstellung finden lassen, sollten vor der Erstellung einer Studienkonfiguration systematisch getestet und ausgeschlossen werden.)</td>
</tr>
<tr class="even">
<td>Funktionale Tests</td>
<td>Bei Bedarf</td>
<td>Nur wenn <em>IRTlib Player</em> und <em>CBA ItemBuilder</em>-<em>Tasks</em> interagieren müssen und bezogen auf im <em>IRTlib Editor</em> definierte Funktionalität (z.B. antwortabhängige Verzweigungen).</td>
</tr>
<tr class="odd">
<td>Cross-Browser-Testung</td>
<td>Bei Bedarf</td>
<td>Nur wenn <em>IRTlib Player</em> online verwendet wird und die Browser nicht den Browsern entsprechen, welche bereits für die <em>CBA ItemBuilder</em>-<em>Preview</em> verwendet wurden.</td>
</tr>
<tr class="even">
<td>Performanz-Tests</td>
<td>Bei Bedarf</td>
<td>Wenn große Multimedia-Teile enthalten sind oder wenn mit schlechter Netzwerkverbindung zu rechnen ist.</td>
</tr>
<tr class="odd">
<td>Last-Tests</td>
<td>Bei Bedarf</td>
<td>Nur wenn Online <em>IRTlib Player</em> mit vielen parallelen Tests administriert werden soll.</td>
</tr>
<tr class="even">
<td>Datenablageprüfung</td>
<td>Immer</td>
<td>Prüfung aller Daten (inkl. Log-Daten, wenn diese für die Auswertung benötigt werden).</td>
</tr>
<tr class="odd">
<td>Smoke-Test</td>
<td>Immer</td>
<td>Smoke-Testung bei jeder Version, vor allem um versehentliche Konfigurationsfehler in <em>letzter Minute</em> auszuschließen.</td>
</tr>
</tbody>
</table>
</section>
<section id="datenerhebung-durchführen" class="level3">
<h3 class="anchored" data-anchor-id="datenerhebung-durchführen">Datenerhebung Durchführen</h3>
<p>Ist die <em>Studie</em> in einem <em>IRTlib Player</em> konfiguriert und getestet, kann die Datenerhebung erfolgen. Je länger die Feldzeit ist, desto wichtiger sind regelmäßige Backups der erhobenen Daten bzw. ein regelmäßiger Abzug der gesammelten Rohdatenarchive von der Erhebungshardware.</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://tba.dipf.de/de">
<p>Zentrum für technologiebasiertes Assessment (TBA-Zentrum)<br>DIPF | Leibniz-Institut für Bildungsforschung und Bildungsinformation</p>
</a>
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>2023-2024, Ulf Kroehne</p>
</div>
  </div>
</footer>




</body></html>